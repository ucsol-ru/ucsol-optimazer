/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function($){var Mobile={};Mobile.nav={nav:null,storage:null,init:function(ele){var $this=this;this.nav=$("nav:first").hide();this.storage=$("#m-navigation-storage");$(ele).bind("click",function(){$this.nav.is(":visible")?$this.hide():$this.show()});this.nav.find(".m-close").bind("click",function(){$this.hide()})},show:function(){scrollTo(0,0);this.buildMenu(this.storage.find("ul.menu-mobile:first"));this.nav.show().addClass("fade in")},hide:function(){this.nav.hide()},buildMenu:function(root){var $this=this;var menu=$("<ul />");if(root.parent().is("li")){$("<li />").addClass("goback").html('<span class="button back">Back</span>').bind("click",function(){$this.buildMenu(root.parent().parent())}).appendTo(menu)}root.children().each(function(){var child=$(this);var childlist=child.find("ul:first");var li=$("<li />");var content=child.find("> a, > span");content.clone().appendTo(li).bind("click",function(e){if($(this).is("a"))e.stopPropagation()});if(childlist.length){li.addClass("parent").bind("click",function(){$this.buildMenu(childlist)})}menu.append(li)});$("#m-navigation").children().remove();$("#m-navigation").append(menu);menu.css("opacity",1).show()}};Mobile.login={login:null,init:function(ele){var $this=this;this.login=$("#m-login").hide();$(ele).bind("click",function(){$this.login.is(":visible")?$this.hide():$this.show()});this.login.find(".m-close").bind("click",function(){$this.hide()})},show:function(){scrollTo(0,0);this.login.show().addClass("fade in")},hide:function(){this.login.hide()}};Mobile.search={search:null,init:function(ele){var $this=this;this.search=$("#m-search").hide();$(ele).bind("click",function(){$this.search.is(":visible")?$this.hide():$this.show()});this.search.find(".m-close").bind("click",function(){$this.hide()})},show:function(){scrollTo(0,0);this.search.show().addClass("fade in")},hide:function(){this.search.hide()}};if($("body").hasClass("mobile")){$("#m-toolbar [data-button]").each(function(){Mobile[$(this).data("button")].init(this)})}else{$('<a href="?mobile=1">Switch to Mobile Version</a>').addClass("mobile-switcher").appendTo($("body"))}});