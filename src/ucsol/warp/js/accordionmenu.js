/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function($){var Plugin=function(){};$.extend(Plugin.prototype,{name:"accordionMenu",options:{mode:"default",display:null,collapseall:false,toggler:"span.level1.parent",content:"ul.level2",onaction:function(){}},initialize:function(element,options){var options=$.extend({},this.options,options);var togglers=element.find(options.toggler);togglers.each(function(i){var toggler=$(this);var content=toggler.next(options.content).wrap("<div>").parent();content.data("height",content.height());toggler.hasClass("active")||i==options.display?content.show():content.hide().css("height",0);toggler.bind("click",function(){display(i)})});var display=function(index){var show=$(togglers.get(index)),hide=$([]);if(show.hasClass("active")){hide=show;show=$([])}if(options.collapseall){hide=togglers.filter(".active")}switch(options.mode){case"slide":show.next().stop().show().animate({height:show.next().data("height")},400);hide.next().stop().animate({height:0},400,function(){hide.next().hide()});setTimeout(function(){options.onaction.apply(this,[show,hide])},401);break;default:show.next().show().css("height",show.next().data("height"));hide.next().hide().css("height",0);options.onaction.apply(this,[show,hide])}show.addClass("active").parent().addClass("active");hide.removeClass("active").parent().removeClass("active")}}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);