var TINY={};function T$(t){return document.getElementById(t)}function T$$(t,s){return s.getElementsByTagName(t)}TINY.table=function(){function t(t,s,e){this.n=t,this.id=s,this.p=e,this.p.init&&this.init()}function a(t,s){return Math.round(t*Math.pow(10,s))/Math.pow(10,s)}function l(t,s){t=e=t.v.toLowerCase(),s=i=s.v.toLowerCase();var e,i,r=parseFloat(t.replace(/(\$|\,)/g,"")),o=parseFloat(s.replace(/(\$|\,)/g,""));return isNaN(r)||isNaN(o)||(e=r,i=o),r=Date.parse(t),o=Date.parse(s),isNaN(r)||isNaN(o)||(e=r,i=o),i<e?1:e<i?-1:0}return t.prototype.init=function(){this.set();var t=this.t,s=d=0;for(t.h=T$$("tr",t)[0],t.l=t.r.length,t.w=t.r[0].cells.length,t.a=[],t.c=[],this.p.is=this.p.size,this.p.colddid&&(d=T$(this.p.colddid),(e=document.createElement("option")).value=-1,e.innerHTML="Общий поиск",d.appendChild(e));s<t.w;s++){var e,i=t.h.cells[s];if(t.c[s]={},"nosort"!=i.className&&(i.className=this.p.headclass,i.onclick=new Function(this.n+".sort("+s+")"),i.onmousedown=function(){return!1}),this.p.columns)for(var r,o=this.p.columns.length,n=0;n<o;n++)this.p.columns[n].index==s&&(r=this.p.columns[n],t.c[s].format=null==r.format?1:r.format,t.c[s].decimals=null==r.decimals?2:r.decimals);d&&((e=document.createElement("option")).value=s,e.innerHTML=T$$("p",i)[0].innerHTML,d.appendChild(e))}this.reset()},t.prototype.reset=function(){var t=this.t;t.t=t.l;for(var s=0;s<t.l;s++)t.a[s]={},t.a[s].s=1;null!=this.p.sortcolumn?this.sort(this.p.sortcolumn,1,this.p.is):(this.p.paginate&&this.size(),this.alt(),this.sethover()),this.calc()},t.prototype.sort=function(t,s,e){for(var i=this.t,t=(i.y=t,i.h.cells[i.y]),r=0,o=document.createElement("tbody");r<i.l;r++){i.a[r].o=r;var n=i.r[r].cells[i.y];for(i.r[r].style.display="";n.hasChildNodes();)n=n.firstChild;i.a[r].v=n.nodeValue||""}for(r=0;r<i.w;r++){var a=i.h.cells[r];"nosort"!=a.className&&(a.className=this.p.headclass)}for(i.p!=i.y||s?(i.p=i.y,s&&-1==this.p.sortdir?i.a.sort(l).reverse():i.a.sort(l),i.d=0,t.className=this.p.ascclass):(i.a.reverse(),t.className=i.d?this.p.ascclass:this.p.descclass,i.d=i.d?0:1),r=0;r<i.l;r++){var h=i.r[i.a[r].o].cloneNode(!0);o.appendChild(h)}i.replaceChild(o,i.b),this.set(),this.alt(),this.p.paginate&&this.size(e),this.sethover()},t.prototype.sethover=function(){if(this.p.hoverid)for(var t=0;t<this.t.l;t++){var s=this.t.r[t];s.setAttribute("onmouseover",this.n+".hover("+t+",1)"),s.setAttribute("onmouseout",this.n+".hover("+t+",0)")}},t.prototype.calc=function(){if(this.p.sum||this.p.avg){var t,s,e=this.t,i=x=0;if(T$$("tfoot",e)[0])for(t=T$$("tfoot",e)[0];t.hasChildNodes();)t.removeChild(t.firstChild);else t=document.createElement("tfoot"),e.appendChild(t);if(this.p.sum)for(s=this.newrow(t);i<e.w;i++){var r=s.cells[i];if(this.p.sum.exists(i)){var o=0,n=e.c[i].format||"";for(x=0;x<this.t.l;x++)e.a[x].s&&(o+=parseFloat(e.r[x].cells[i].innerHTML.replace(/(\$|\,)/g,"")));o=a(o,e.c[i].decimals||2),o=isNaN(o)?"n/a":"$"==n?o.currency(e.c[i].decimals):o+n,s.cells[i].innerHTML=o}else s.cells[i].innerHTML="&nbsp;"}if(this.p.avg)for(s=this.newrow(t),i=0;i<e.w;i++){r=s.cells[i];if(this.p.avg.exists(i)){o=c=0,n=e.c[i].format||"";for(x=0;x<this.t.l;x++)e.a[x].s&&(o+=parseFloat(e.r[x].cells[i].innerHTML.replace(/(\$|\,)/g,"")),c++);o=a(o/c,e.c[i].decimals||2),o=isNaN(o)?"n/a":"$"==n?o.currency(e.c[i].decimals):o+n,r.innerHTML=o}else r.innerHTML="&nbsp;"}}},t.prototype.newrow=function(t){var s=document.createElement("tr"),e=0;for(t.appendChild(s);e<this.t.w;e++)s.appendChild(document.createElement("td"));return s},t.prototype.alt=function(){for(var t=this.t,s=x=0;s<t.l;s++){var e=t.r[s];if(t.a[s].s){e.className=x%2==0?this.p.evenclass:this.p.oddclass;for(var i=T$$("td",e),r=0;r<t.w;r++)i[r].className=t.y==r?x%2==0?this.p.evenselclass:this.p.oddselclass:"";x++}t.a[s].s||(e.style.display="none")}},t.prototype.page=function(t){var s,e,i=this.t,r=x=0,o=t+parseInt(this.p.size);for(this.p.totalrecid&&(T$(this.p.totalrecid).innerHTML=i.t),this.p.currentid&&(T$(this.p.currentid).innerHTML=this.g),this.p.startingrecid&&(e=(e=(e=(s=(this.g-1)*this.p.size+1)+(this.p.size-1))<i.l?e:i.t)<i.t?e:i.t,T$(this.p.startingrecid).innerHTML=0==i.t?0:s,T$(this.p.endingrecid).innerHTML=e);r<i.l;r++){var n=i.r[r];i.a[r].s?(n.style.display=x>=t&&x<o?"":"none",x++):n.style.display="none"}},t.prototype.move=function(t,s){this.goto(1==t?s?this.d:this.g+1:s?1:this.g-1)},t.prototype.goto=function(t){t<=this.d&&0<t&&(this.g=t,this.page((t-1)*this.p.size))},t.prototype.size=function(t){var s=this.t;if(t&&(this.p.size=t),this.g=1,this.d=Math.ceil(this.t.t/this.p.size),this.p.navid&&(T$(this.p.navid).style.display=this.d<2?"none":"block"),this.page(0),this.p.totalid&&(T$(this.p.totalid).innerHTML=0==s.t?1:this.d),this.p.pageddid){var e=T$(this.p.pageddid);this.d;for(e.setAttribute("onchange",this.n+".goto(this.value)");e.hasChildNodes();)e.removeChild(e.firstChild);for(var i=1;i<=this.d;i++){var r=document.createElement("option");r.value=i,r.innerHTML=i,e.appendChild(r)}}},t.prototype.showall=function(){this.size(this.t.t)},t.prototype.search=function(t){for(var s=x=n=0,e=-1,i=T$(t).value.toLowerCase(),r=-1==(e=this.p.colddid?T$(this.p.colddid).value:e)?0:e,o=-1==e?this.t.w:parseInt(r)+1;s<this.t.l;s++){var a,h=this.t.r[s];if(""==i)a=1;else for(x=r;x<o;x++){if(-1!=h.cells[x].innerHTML.toLowerCase().indexOf(i)){a=1;break}a=0}a&&n++,this.t.a[s].s=a}this.t.t=n,this.p.paginate&&this.size(),this.calc(),this.alt()},t.prototype.hover=function(t,s){this.t.r[t].id=s?this.p.hoverid:""},t.prototype.set=function(){var t=T$(this.id);t.b=T$$("tbody",t)[0],t.r=t.b.rows,this.t=t},Array.prototype.exists=function(t){for(var s=0;s<this.length;s++)if(this[s]==t)return 1;return 0},Number.prototype.currency=function(t){t=this.toFixed(t).split(".");return t[0]=t[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join(""),"$"+t.join(".")},{sorter:t}}();